
GeometryReader in SwiftUI

Purpose.  GeometryReader is a SwiftUI container view that exposes the size and position (geometry) of its own coordinate space. It’s a tool for making layout decisions based on the available space, the view’s position relative to its parent, or for aligning views dynamically.

Use GeometryReader when you need to:
• Adapt layout to different screen sizes or orientations.
• Position child views based on size or location.
• Create effects like sticky headers, parallax scrolling, or bounded dragging.
• Build your own custom layout behaviors.

Basic Form:
GeometryReader { geometry in
    // geometry is a GeometryProxy
    // You use it to access size, position, etc.
    Text("Width: \(geometry.size.width)")
}

Key Properties of GeometryProxy

The geometry parameter is a GeometryProxy, which offers:
• geometry.size → CGSize of the container.
• geometry.frame(in:) → frame in a chosen coordinate space (e.g., .local, .global, .named("Foo")).
• geometry.safeAreaInsets → padding from system safe areas (e.g., notch, home bar).

Common Use Cases
1. Read Container Size
GeometryReader { geo in
    Text("Width: \(geo.size.width)")
}

2. Bound a Drag Gesture
GeometryReader { geo in
    Rectangle()
        .position(dragLocation.clamped(to: geo.size))
        .gesture(
            DragGesture().onChanged { value in
                dragLocation = value.location.clamped(to: geo.size)
            }
        )
}

3. Positioning Relative to Global View
GeometryReader { geo in
    let globalFrame = geo.frame(in: .global)
    Text("Top: \(globalFrame.minY)")
}

Coordinate Spaces
You can use .frame(in:) with:
• .local → Relative to the GeometryReader itself (default)
• .global → Relative to the screen (or root container)
• .named("SomeName") → Custom named spaces via .coordinateSpace(name:)

This is useful for building scroll effects:

ScrollView {
    GeometryReader { geo in
        let offset = geo.frame(in: .global).minY
        // Create scroll-dependent effects here
    }
    .frame(height: 300) // Required! GeometryReader takes all space otherwise
}

Gotchas
• It expands to all available space unless you explicitly constrain its size.
• You’ll often see .frame(height: ...) used to keep it from expanding indefinitely.
• It doesn’t “read” a child’s size. It measures its own size in the parent’s coordinate space.
• It delays layout slightly, so animations and size reads may not be immediate.

Best Practices
• Use sparingly: not every dynamic layout needs GeometryReader.
• Always constrain its size when used inside stacks or scroll views.
• Prefer ViewThatFits or Layout for responsive design when possible (in iOS 16+).
• For reading child size, consider using PreferenceKey or background(GeometryReader(...)).

Summary
GeometryReader is your window into layout geometry in SwiftUI. It allows you to build responsive, interactive, and dynamic layouts. While powerful, it should be used with care to avoid layout confusion or over-complexity.

Use it when:
• You need to respond to size.
• You need to align or constrain views based on their position.
• You’re building a custom view that reacts to its own or its parent’s geometry.
